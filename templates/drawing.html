{% extends "base.html" %}

{% block title %}Drawing - Match Maker{% endblock %}
{% block body_class %}drawing{% endblock %}
{% block styles %}
<link rel="stylesheet" href="{{ url_for('static', filename='css/drawing.css') }}">
{% endblock %}

{% block intro %}
<div class="intro intro-with-icon">
  <span>Players Drawing</span>
  <a href="{{ url_for('leaderboard') }}" class="intro-icon-link" aria-label="View leaderboard">
    <img src="{{ url_for('static', filename='images/leaderboard.svg') }}" alt="Leaderboard" class="intro-icon">
  </a>
</div>
{% endblock %}

{% block content %}
  {% if pending_game %}
    <div class="game-info">
      <h2>Game #{{ pending_game.game_no }}</h2>
      <p class="court">(Court A)</p>
    </div>

    {% set team_a = pending_game.teams[0] if pending_game.teams|length > 0 else ['-', '-'] %}
    {% set team_b = pending_game.teams[1] if pending_game.teams|length > 1 else ['-', '-'] %}

    <div class="team-box">
      <span class="player team-a">{{ team_a[0] }}</span>
      <span class="plus">+</span>
      <span class="player team-a">{{ team_a[1] }}</span>
    </div>

    <div class="vs">vs</div>

    <div class="team-box">
      <span class="player team-b">{{ team_b[0] }}</span>
      <span class="plus">+</span>
      <span class="player team-b">{{ team_b[1] }}</span>
    </div>
  {% else %}
    <p>No games available yet. Click <strong>Game On!</strong> to generate the first pairing.</p>
  {% endif %}

  <form method="POST" class="button-row">
    <button type="submit" name="action" value="redraw" class="btn btn-blue" id="redraw-btn" {% if not pending_game %}disabled{% endif %}>Re-Draw</button>
    <button type="submit" name="action" value="next" class="btn btn-orange" {% if not pending_game %}disabled{% endif %}>Game On!</button>
  </form>

  <form method="POST" action="{{ url_for('wrap_up') }}" class="status-icon wrap-up-form">
    <button type="submit" class="wrap-up-trigger" title="Wrap up the day">
      <span class="status-label">Wrap Up the Day</span>
      <img src="{{ url_for('static', filename='images/done_flag.svg') }}" alt="Completed session" class="done-flag-icon">
    </button>
  </form>
{% endblock %}

{% block scripts %}{% endblock %}
