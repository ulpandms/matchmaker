{% extends "base.html" %}

{% block title %}Game Session · Match Maker{% endblock %}
{% block body_class %}game-session{% endblock %}
{% block styles %}
<link rel="stylesheet" href="{{ url_for('static', filename='css/game-session.css') }}">
{% endblock %}

{% block intro %}
<p class="intro">Game Session</p>
{% endblock %}

{% block content %}
  <!-- Game Info -->
  <div class="game-info">
    <h2>Game #{{ game_no }}</h2>
    <p class="court">(Court A)</p>
  </div>

  <!-- Teams -->
  <div class="teams">
    <div class="team-box team-a">
      <span class="player">{{ team_a[0] }}</span> + <span class="player">{{ team_a[1] }}</span>
    </div>
    <div class="vs-circle">Vs</div>
    <div class="team-box team-b">
      <span class="player">{{ team_b[0] }}</span> + <span class="player">{{ team_b[1] }}</span>
    </div>
  </div>

  <!-- Scoreboard -->
  <div class="scoreboard">
    <div class="score-column">
      <div class="score-box team-a-score">
        <div class="score-number" id="scoreA">0</div>
      </div>
      <div class="controls">
        <button type="button" class="btn-control" onclick="changeScore('A', -1)">−</button>
        <button type="button" class="btn-control" onclick="changeScore('A', 1)">+</button>
      </div>
    </div>
    <div class="score-column">
      <div class="score-box team-b-score">
        <div class="score-number" id="scoreB">0</div>
      </div>
      <div class="controls">
        <button type="button" class="btn-control" onclick="changeScore('B', 1)">+</button>
        <button type="button" class="btn-control" onclick="changeScore('B', -1)">−</button>
      </div>
    </div>
  </div>

  <!-- Duration -->
  <p class="duration">Game Duration: <span id="duration">0’</span></p>
  <p id="winner-msg" class="winner-msg"></p>

  <!-- Buttons -->
  <div class="button-row">
    <button type="button" class="btn btn-blue" onclick="endGame()">End This Game</button>
    <button type="button" id="nextBtn" class="btn btn-orange" disabled onclick="nextMatch()">Next Match</button>
  </div>
{% endblock %}

{% block scripts %}
<script>
  const pointLimit = {{ point_limit|default(21) }};
  const teamA = {{ team_a|tojson }};
  const teamB = {{ team_b|tojson }};
  const startTime = new Date("{{ start_time }}");
  let initialScoreA = {{ scoreA }};
  let initialScoreB = {{ scoreB }};
</script>
<script src="{{ url_for('static', filename='js/game-session.js') }}"></script>
{% endblock %}
